{"remainingRequest":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/src/components/ContentFeed/components/Post.vue?vue&type=style&index=0&id=6a1b1541&scoped=true&lang=css&","dependencies":[{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/src/components/ContentFeed/components/Post.vue","mtime":1634288873001},{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/usuario/Desktop/SoftwareDEV/MisionTIC/mental-health-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLndyYXBwZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiAjZTdmNWZmOyAqLwogIC8qIGJhY2tncm91bmQtY29sb3I6ICNkZmY5ZmQgOyAqLwogIHBhZGRpbmc6IDAuNXJlbTsKICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgbWFyZ2luLWJvdHRvbTogMnJlbTsKfQoKLndyYXBwZXIgLnBvc3QtYXZhdGFyIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogMXJlbTsKfQoKLmluZm8gLmRhdGUgewogIGZvbnQtc2l6ZTogMC44cmVtOwp9Ci53cmFwcGVyIC5wb3N0LWNvbnRlbnQgewogIG1hcmdpbjogMC41cmVtIDAuNXJlbTsKICB3aWR0aDogOTAlOwp9Ci5hY3Rpb24taWNvbnMgewogIG1hcmdpbi10b3A6IDAuNXJlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQouYWN0aW9uLWljb25zIDpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLXJpZ2h0OiAwLjJyZW07Cn0KLnBvc3QtY29tbWVudHMgewogIGRpc3BsYXk6IGZsZXg7CiAgbWFyZ2luLWxlZnQ6IDFyZW07CiAgbWFyZ2luLXRvcDogMXJlbTsKfQouY29tbWVudCB7CiAgZmxleDogMTsKICBib3JkZXI6IDFweCBzb2xpZCAjZWRlOWU5OwogIGRpc3BsYXk6IHRhYmxlLWNlbGw7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgbWFyZ2luLXJpZ2h0OiAxcmVtOwogIHBhZGRpbmc6IDEwcHg7CiAgdmVydGljYWwtYWxpZ246IHRvcDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDY1JTsKfQoudXNlcm5hbWUgewogIGZvbnQtd2VpZ2h0OiBib2xkOwp9Ci5jb21tZW50LXR4dCB7CiAgZm9udC1zaXplOiAwLjlyZW07CiAgY29sb3I6ICM1NzU3NTc7Cn0KLmNvbW1lbnQ6OmJlZm9yZSB7CiAgYm9yZGVyLWJvdHRvbTogMTBweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDExcHggc29saWQgI2VkZTllOTsKICBib3JkZXItdG9wOiAxMHB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGxlZnQ6IC0xMXB4OwogIHRvcDogMTBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgY29udGVudDogIiI7Cn0KLmNvbW1lbnQ6OmFmdGVyIHsKICBib3JkZXItYm90dG9tOiA4cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLXJpZ2h0OiA5cHggc29saWQgI2ZmZjsKICBib3JkZXItdG9wOiA4cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgbGVmdDogLTlweDsKICB0b3A6IDEycHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGNvbnRlbnQ6ICIiOwp9Ci5wb3N0LWNvbW1lbnRzID4gLmNvbW1lbnQgewogIGNvbG9yOiAjNzA3MDcwOwp9CgovKiBpY29ucyAqLwouYmktc3VpdC1oZWFydC1maWxsID4gKiB7CiAgY3Vyc29yOiBwb2ludGVyOwogIHRyYW5zaXRpb246IGFsbCAyczsKICBmb250LXNpemU6IDFyZW07CiAgLyogY29sb3I6IHJnYigxNDYsIDEwLCAxMCk7ICovCn0KLm5vdC12b3RlZCB7CiAgY29sb3I6IHJnYigyMDYsIDIwNiwgMjA2KSAhaW1wb3J0YW50Owp9Ci52b3RlZCB7CiAgY29sb3I6IHJnYigyMDEsIDY5LCA2OSk7Cn0KLmJpLXN1aXQtaGVhcnQtZmlsbDpob3ZlciB7CiAgdHJhbnNpdGlvbjogYWxsIDFzOwogIGZvbnQtc2l6ZTogMS41cmVtOwp9CgovKiBFZGl0IFBvc3QgSWNvbiAqLwouYmktdGhyZWUtZG90cyB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgouY29tbWVudC1wb3N0LWFjdGlvbi13cmFwcGVyIHsKICAvKiB3aWR0aDogMjAlOyAqLwp9Cg=="},{"version":3,"sources":["Post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Post.vue","sourceRoot":"src/components/ContentFeed/components","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"post-avatar\">\n      <div class=\"d-flex justify-content-center align-items-center\">\n        <span @click=\"goToProfileHandler\"><b-avatar text=\"BV\"></b-avatar></span>\n      </div>\n      <div class=\"info d-flex flex-column align-items-start\">\n        <p class=\"username m-0\">@{{ currentPost.user.username }}</p>\n\n        <p class=\"date font-weight-lighter\">\n          {{ formatString(currentPost.created_at) }}\n        </p>\n      </div>\n      <b-icon-three-dots @click=\"editPost()\" />\n    </div>\n    <div class=\"post-content pl-5\">\n      <p v-if=\"!editable\" class=\"comment-txt\">\n        {{ currentPost.content }}\n      </p>\n      <textarea\n        v-else\n        v-model=\"currentPost.content\"\n        v-on:keyup.enter=\"updatePost()\"\n      ></textarea>\n      <div class=\"action-icons\">\n        <div>\n          1\n          <b-icon-chat @click=\"newCommentHandler\" />\n        </div>\n        <div class=\"d-flex ml-2\">\n          {{ currentPost.likes.length }}\n          <div class=\"ml-1\" v-bind:class=\"[votedPost ? 'voted' : 'not-voted']\">\n            <b-icon-suit-heart-fill @click=\"vote(currentPost.id)\" />\n          </div>\n        </div>\n      </div>\n      <div v-if=\"isCommenting\">\n        <div class=\"form-group\">\n          <input\n            class=\"form-control form-control-sm\"\n            type=\"text\"\n            placeholder=\"new comment..\"\n            v-model=\"newComment\"\n          />\n        </div>\n        <div class=\"d-flex flex-column justify-content-end align-items-end\">\n          <div class=\"comment-post-action-wrapper d-flex flex-row\">\n            <b-button\n              size=\"sm\"\n              pill\n              variant=\"primary\"\n              class=\"mr-2\"\n              @click=\"sendCommentHandler\"\n              >Send</b-button\n            >\n            <b-button\n              size=\"sm\"\n              pill\n              variant=\"outline-danger\"\n              @click=\"newCommentHandler\"\n              >X</b-button\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"post-comments\"\n      v-for=\"comment in currentPost.comments\"\n      :key=\"comment.id\"\n    >\n      <b-avatar class=\"icon\"></b-avatar>\n      <div class=\"comment\">\n        <p class=\"\">@{{ comment.author }}</p>\n        <p class=\"comment-txt\">{{ comment.content }}</p>\n      </div>\n    </div>\n\n    <div class=\"overflow-auto\"></div>\n  </div>\n</template>\n\n<script>\nimport { getFromLocal } from \"@/utils/localStorage\";\nimport { updatePost } from \"@/services/post\";\nexport default {\n  name: \"Post\",\n  data() {\n    return {\n      items: [\n        { id: 1, message: \"Hello bro!\" },\n        { id: 2, message: \"Yet another comment\" },\n      ],\n      votedPost: false,\n      editable: false,\n      isCommenting: false,\n      newComment: \"\",\n    };\n  },\n  computed: {\n    userId() {\n      const userId = getFromLocal(\"user\").user.id;\n      return userId;\n    },\n    user() {\n      return getFromLocal(\"user\");\n    },\n    currentPost() {\n      const currentPost = this.$store.state.posts.filter((post) => {\n        return post.id.trim() == this.$props.data.id.trim() ? post : null;\n      });\n\n      return currentPost.length !== 0 ? currentPost[0] : null;\n    },\n  },\n\n  props: [\"data\"],\n  created() {\n    const canEditPost = this.determinePostOwnership();\n    if (canEditPost) {\n      // this.editable = true;\n    }\n    const hasLiked = this.$props.data.likes.find(\n      (userId) => userId == this.userId\n    );\n    if (hasLiked) {\n      this.votedPost = true;\n    }\n  },\n  mounted() {},\n  methods: {\n    vote(id) {\n      if (!this.votedPost) {\n        this.votedPost = !this.votedPost;\n        const newLikesArray = this.$props.data.likes.concat(this.userId);\n        updatePost({\n          newPostData: { likes: newLikesArray },\n          postId: this.$props.data.id,\n        }).then((res) => {\n          this.$store.dispatch(\"votePost\", { updatedPost: res.data });\n          // console.log('res',res);\n          // this.$store.dispatch(\"updatePost\", res.data);\n        });\n      } else {\n        const newLikesArray = this.$props.data.likes.filter(\n          (like) => like !== this.userId\n        );\n        updatePost({\n          newPostData: { likes: newLikesArray },\n          postId: this.$props.data.id,\n        }).then((res) => {\n          // console.log('downvoted post resul', res.data);\n          this.$store.dispatch(\"updatePost\", res.data);\n          this.votedPost = false;\n        });\n      }\n    },\n    editPost() {\n      const canEditPost = this.determinePostOwnership();\n      if (canEditPost) {\n        this.editable = !this.editable;\n      }\n    },\n    updatePost() {\n      const newPostContent = this.$props.data.content.replace(\"\\n\", \"\");\n      updatePost({\n        newPostData: { content: newPostContent },\n        postId: this.$props.data.id,\n      }).then((res) => {\n        this.$store.dispatch(\"updatePost\", res.data);\n        this.editable = false;\n      });\n    },\n    determinePostOwnership() {\n      const ownershipResult =\n        this.$props.data.user.id.trim() == this.userId.trim() ? true : false;\n      return ownershipResult;\n    },\n    hasVotedPost() {\n      const hasLiked = this.$props.data.likes.find(\n        (userId) => userId == this.userId\n      );\n      return hasLiked !== undefined ? true : false;\n    },\n    newCommentHandler() {\n      this.isCommenting = !this.isCommenting;\n    },\n    sendCommentHandler() {\n      updatePost({\n        newPostData: {\n          newComment: {\n            comment: this.newComment,\n            author: this.user.user.username,\n          },\n        },\n        postId: this.$props.data.id,\n      }).then((res) => {\n        this.$store.dispatch(\"updatePost\", res.data);\n      });\n    },\n    formatString(stringDate) {\n      var options = { year: \"numeric\", month: \"short\", day: \"numeric\" };\n      let postDate = new Date(stringDate);\n      return postDate.toLocaleDateString(\"en-US\", options);\n    },\n    goToProfileHandler() {\n      this.$router.push({ name: `Profile`, params:{id: `${this.currentPost.user.id}`} });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  /* background-color: #e7f5ff; */\n  /* background-color: #dff9fd ; */\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  margin-bottom: 2rem;\n}\n\n.wrapper .post-avatar {\n  display: flex;\n  gap: 1rem;\n}\n\n.info .date {\n  font-size: 0.8rem;\n}\n.wrapper .post-content {\n  margin: 0.5rem 0.5rem;\n  width: 90%;\n}\n.action-icons {\n  margin-top: 0.5rem;\n  text-align: center;\n  display: flex;\n  justify-content: center;\n}\n.action-icons :first-child {\n  margin-right: 0.2rem;\n}\n.post-comments {\n  display: flex;\n  margin-left: 1rem;\n  margin-top: 1rem;\n}\n.comment {\n  flex: 1;\n  border: 1px solid #ede9e9;\n  display: table-cell;\n  margin-left: 20px;\n  margin-right: 1rem;\n  padding: 10px;\n  vertical-align: top;\n  position: relative;\n  width: 65%;\n}\n.username {\n  font-weight: bold;\n}\n.comment-txt {\n  font-size: 0.9rem;\n  color: #575757;\n}\n.comment::before {\n  border-bottom: 10px solid transparent;\n  border-right: 11px solid #ede9e9;\n  border-top: 10px solid transparent;\n  left: -11px;\n  top: 10px;\n  position: absolute;\n  content: \"\";\n}\n.comment::after {\n  border-bottom: 8px solid transparent;\n  border-right: 9px solid #fff;\n  border-top: 8px solid transparent;\n  left: -9px;\n  top: 12px;\n  position: absolute;\n  content: \"\";\n}\n.post-comments > .comment {\n  color: #707070;\n}\n\n/* icons */\n.bi-suit-heart-fill > * {\n  cursor: pointer;\n  transition: all 2s;\n  font-size: 1rem;\n  /* color: rgb(146, 10, 10); */\n}\n.not-voted {\n  color: rgb(206, 206, 206) !important;\n}\n.voted {\n  color: rgb(201, 69, 69);\n}\n.bi-suit-heart-fill:hover {\n  transition: all 1s;\n  font-size: 1.5rem;\n}\n\n/* Edit Post Icon */\n.bi-three-dots {\n  cursor: pointer;\n}\n\n.comment-post-action-wrapper {\n  /* width: 20%; */\n}\n</style>\n"]}]}